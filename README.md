# کنترل کننده دوربین ITC231-RF1A-IR

این پروژه برای کنترل دوربین مدل ITC231-RF1A-IR با استفاده از پایتون طراحی شده است.

## ویژگی‌ها

- 🔌 اتصال به دوربین از طریق شبکه
- 🎥 نمایش استریم زنده
- 📸 گرفتن عکس از دوربین
- 🔧 تست اتصال و وضعیت دوربین
- 📋 نمایش اطلاعات دوربین

## نصب و راه‌اندازی

### 1. نصب وابستگی‌ها

```bash
pip install -r requirements.txt
```

### 2. تنظیمات دوربین

در فایل `main.py` مشخصات دوربین خود را وارد کنید:

```python
CAMERA_IP = "192.168.1.108"      # آدرس IP دوربین
USERNAME = "admin"               # نام کاربری
PASSWORD = "ArashArash"          # رمز عبور
```

## استفاده

### اجرای برنامه اصلی

```bash
python main.py
```

### تست ساده دوربین

```bash
python main.py --test
```

## ساختار پروژه

```
readCamera/
├── camera_controller.py    # کلاس اصلی کنترل دوربین
├── main.py                 # اسکریپت اصلی و منوی کاربری
├── requirements.txt        # وابستگی‌های پروژه
└── README.md              # راهنمای استفاده
```

## توضیحات فنی

### کلاس CameraController

این کلاس تمام عملیات مربوط به دوربین را مدیریت می‌کند:

- **`__init__()`**: مقداردهی اولیه با آدرس IP، نام کاربری و رمز عبور
- **`test_connection()`**: تست اتصال به دوربین
- **`connect_stream()`**: اتصال به استریم ویدیویی
- **`open_camera()`**: باز کردن دوربین (ترکیب تست اتصال و اتصال به استریم)
- **`close_camera()`**: بستن اتصال دوربین
- **`capture_frame()`**: گرفتن یک فریم از دوربین
- **`show_live_stream()`**: نمایش استریم زنده
- **`save_snapshot()`**: ذخیره عکس از دوربین
- **`get_camera_info()`**: دریافت اطلاعات دوربین

### آدرس‌های استریم

برنامه آدرس‌های مختلف استریم را امتحان می‌کند:

1. `/videostream.cgi`
2. `/mjpeg`
3. `/video.mjpg`
4. `/cam/realmonitor?channel=1&subtype=0`

### کلیدهای کنترل

- **ESC**: خروج از استریم زنده
- **Ctrl+C**: خروج از برنامه

## عیب‌یابی

### مشکلات رایج

1. **خطای اتصال**:
   - آدرس IP دوربین را بررسی کنید
   - اطمینان حاصل کنید که دوربین در شبکه قابل دسترسی است
   - نام کاربری و رمز عبور را بررسی کنید

2. **خطای استریم**:
   - ممکن است دوربین از پروتکل متفاوتی استفاده کند
   - پورت دوربین را بررسی کنید (پیش‌فرض 80)

3. **کیفیت تصویر**:
   - تنظیمات کیفیت در تنظیمات دوربین قابل تغییر است

## الزامات سیستم

- Python 3.7 یا بالاتر
- OpenCV
- کتابخانه requests
- اتصال شبکه به دوربین

## مثال کد

```python
from camera_controller import CameraController

# ایجاد نمونه کنترل کننده
camera = CameraController("192.168.1.108", "admin", "ArashArash")

# باز کردن دوربین
if camera.open_camera():
    # گرفتن عکس
    camera.save_snapshot("my_photo.jpg")
    
    # نمایش استریم (تا زمان فشردن ESC)
    camera.show_live_stream()
    
    # بستن دوربین
    camera.close_camera()
```

## مجوز

این پروژه تحت مجوز MIT منتشر شده است.
